import{_ as P,s as A,c as M,a as e,w as t,E as j,r as n,h as b,g as v,d as F,S as $,o as h,f as d,U as q,I as G,t as k,b as f}from"./index-jCaZfwQD.js";import{g as H}from"./notice-BRue8wlH.js";import{A as J}from"./AppEmpty-BAEE0X2a.js";const K={class:"notice-list-container"},O={class:"pagination-container"},Q={__name:"NoticeList",setup(W){const z=F(),y=b([]),p=b(!1),s=v({keyword:"",priority:null}),r=v({current:1,size:10,total:0}),c=async()=>{p.value=!0;try{const a=await H({current:r.current,size:r.size,...s});a.code===200&&(y.value=a.data.records,r.total=a.data.total)}catch(a){console.error("获取通知列表失败:",a),j.error("获取通知失败，请稍后再试")}finally{p.value=!1}},C=()=>{r.current=1,c()},g=()=>{s.keyword="",s.priority=null,r.current=1,c()},V=a=>{r.size=a,c()},N=a=>{r.current=a,c()},x=a=>{switch(a){case 1:return"普通";case 2:return"重要";case 3:return"紧急";default:return"未知"}},D=a=>{switch(a){case 1:return"info";case 2:return"warning";case 3:return"danger";default:return"info"}},S=a=>{z.push({name:"NoticeDetail",params:{id:a.id}})};return A(()=>{c()}),(a,o)=>{const U=n("el-input"),_=n("el-form-item"),m=n("el-option"),B=n("el-select"),u=n("el-button"),E=n("el-form"),i=n("el-table-column"),w=n("el-tag"),L=n("el-table"),R=n("el-pagination"),T=n("el-card"),I=$("loading");return h(),M("div",K,[e(T,{class:"box-card"},{header:t(()=>[...o[4]||(o[4]=[f("div",{class:"card-header"},[f("span",null,"通知公告")],-1)])]),default:t(()=>[e(E,{inline:!0,model:s,class:"search-form"},{default:t(()=>[e(_,{label:"标题"},{default:t(()=>[e(U,{modelValue:s.keyword,"onUpdate:modelValue":o[0]||(o[0]=l=>s.keyword=l),placeholder:"请输入标题",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"优先级"},{default:t(()=>[e(B,{modelValue:s.priority,"onUpdate:modelValue":o[1]||(o[1]=l=>s.priority=l),placeholder:"请选择优先级",clearable:""},{default:t(()=>[e(m,{label:"普通",value:1}),e(m,{label:"重要",value:2}),e(m,{label:"紧急",value:3})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(u,{type:"primary",onClick:C},{default:t(()=>[...o[5]||(o[5]=[d("查询",-1)])]),_:1}),e(u,{onClick:g},{default:t(()=>[...o[6]||(o[6]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),q((h(),G(L,{data:y.value,border:"",style:{width:"100%"}},{empty:t(()=>[e(J,{description:"暂无通知"},{default:t(()=>[e(u,{type:"primary",onClick:g},{default:t(()=>[...o[7]||(o[7]=[d("清空筛选",-1)])]),_:1})]),_:1})]),default:t(()=>[e(i,{prop:"id",label:"ID",width:"80"}),e(i,{prop:"title",label:"标题","show-overflow-tooltip":""}),e(i,{prop:"publisherName",label:"发布人",width:"120"}),e(i,{label:"优先级",width:"100"},{default:t(l=>[e(w,{type:D(l.row.priority)},{default:t(()=>[d(k(x(l.row.priority)),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"publishTime",label:"发布时间",width:"180"}),e(i,{label:"状态",width:"80"},{default:t(l=>[e(w,{type:l.row.isRead?"info":"success"},{default:t(()=>[d(k(l.row.isRead?"已读":"未读"),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"操作",width:"100"},{default:t(l=>[e(u,{type:"primary",link:"",onClick:X=>S(l.row)},{default:t(()=>[...o[8]||(o[8]=[d(" 查看 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,p.value]]),f("div",O,[e(R,{"current-page":r.current,"onUpdate:currentPage":o[2]||(o[2]=l=>r.current=l),"page-size":r.size,"onUpdate:pageSize":o[3]||(o[3]=l=>r.size=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:V,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1})])}}},te=P(Q,[["__scopeId","data-v-223e0f34"]]);export{te as default};
