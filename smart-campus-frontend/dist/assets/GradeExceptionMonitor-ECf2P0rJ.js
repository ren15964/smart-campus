import{_ as C,s as E,c as y,b as V,a as e,w as n,h as b,g as B,E as i,r as l,o as u,G,H as M,I as L,f as p,t as $}from"./index-jCaZfwQD.js";const q={class:"admin-grade-exception-monitor"},D={__name:"GradeExceptionMonitor",setup(F){const r=B({courseId:null}),c=b([]),m=b([]),x=()=>new Promise(t=>{setTimeout(()=>{t([{id:1,name:"数据结构"},{id:2,name:"算法设计"}])},500)}),w=t=>new Promise(o=>{setTimeout(()=>{console.log("模拟获取异常成绩:",t),t.courseId===1?o({code:200,data:[{id:1,studentName:"张三",courseName:"数据结构",score:55,exceptionType:"不及格",description:"期末成绩低于60分"},{id:2,studentName:"王五",courseName:"数据结构",score:62,exceptionType:"成绩波动大",description:"平时分90，期末分30"}]}):t.courseId===2?o({code:200,data:[{id:3,studentName:"赵六",courseName:"算法设计",score:58,exceptionType:"不及格",description:"总成绩低于60分"}]}):o({code:200,data:[]})},800)}),d=async()=>{try{const t=await w(r);t.code===200?m.value=t.data:i.error(t.msg||"获取异常成绩失败")}catch{i.error("网络错误或服务器异常")}},g=t=>{i.info(`查看 ${t.studentName} 的 ${t.courseName} 成绩详情 (暂未实现)`)};return E(async()=>{c.value=await x(),c.value.length>0&&(r.courseId=c.value[0].id,d())}),(t,o)=>{const N=l("el-option"),v=l("el-select"),_=l("el-form-item"),f=l("el-button"),T=l("el-form"),s=l("el-table-column"),h=l("el-tag"),k=l("el-table"),I=l("el-card");return u(),y("div",q,[o[3]||(o[3]=V("h2",null,"成绩异常监控",-1)),e(I,null,{default:n(()=>[e(T,{inline:!0,model:r,class:"query-form"},{default:n(()=>[e(_,{label:"选择课程"},{default:n(()=>[e(v,{modelValue:r.courseId,"onUpdate:modelValue":o[0]||(o[0]=a=>r.courseId=a),placeholder:"请选择课程",clearable:"",onChange:d},{default:n(()=>[(u(!0),y(G,null,M(c.value,a=>(u(),L(N,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:n(()=>[e(f,{type:"primary",onClick:d},{default:n(()=>[...o[1]||(o[1]=[p("查询",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),e(k,{data:m.value,border:"",style:{width:"100%"}},{default:n(()=>[e(s,{prop:"studentName",label:"学生姓名",width:"120"}),e(s,{prop:"courseName",label:"课程名称",width:"150"}),e(s,{prop:"score",label:"成绩",width:"100"}),e(s,{prop:"exceptionType",label:"异常类型",width:"150"},{default:n(a=>[e(h,{type:a.row.exceptionType==="不及格"?"danger":"warning"},{default:n(()=>[p($(a.row.exceptionType),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"description",label:"描述"}),e(s,{label:"操作",width:"100"},{default:n(a=>[e(f,{link:"",type:"primary",size:"small",onClick:P=>g(a.row)},{default:n(()=>[...o[2]||(o[2]=[p("查看详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},A=C(D,[["__scopeId","data-v-b84658a7"]]);export{A as default};
