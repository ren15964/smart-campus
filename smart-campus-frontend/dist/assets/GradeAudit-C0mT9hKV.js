import{_ as y,s as x,c as v,b as k,a as o,w as s,E as a,r as n,h as B,o as T,f as u,Q as m}from"./index-CWfbs8s0.js";const $={class:"admin-grade-audit"},G={__name:"GradeAudit",setup(A){const l=B([]),p=()=>new Promise(t=>{setTimeout(()=>{t({code:200,data:[{id:1,studentName:"张三",courseName:"数据结构",originalScore:80,modifiedScore:85,reason:"平时分录入错误",teacherName:"王老师"},{id:2,studentName:"李四",courseName:"算法设计",originalScore:75,modifiedScore:78,reason:"期末卷面分有误",teacherName:"李老师"}]})},800)}),_=t=>new Promise(e=>{setTimeout(()=>{console.log(`批准成绩修改请求: ${t}`),e({code:200,msg:"成绩修改已批准"})},500)}),f=t=>new Promise(e=>{setTimeout(()=>{console.log(`拒绝成绩修改请求: ${t}`),e({code:200,msg:"成绩修改已拒绝"})},500)}),c=async()=>{try{const t=await p();t.code===200?l.value=t.data:a.error(t.msg||"获取待审核成绩失败")}catch{a.error("网络错误或服务器异常")}},g=async t=>{m.confirm(`确认批准学生 ${t.studentName} 的课程 ${t.courseName} 成绩修改吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e=await _(t.id);e.code===200?(a.success(e.msg),c()):a.error(e.msg||"批准失败")}catch{a.error("网络错误或服务器异常")}}).catch(()=>{a.info("已取消批准")})},h=async t=>{m.confirm(`确认拒绝学生 ${t.studentName} 的课程 ${t.courseName} 成绩修改吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e=await f(t.id);e.code===200?(a.success(e.msg),c()):a.error(e.msg||"拒绝失败")}catch{a.error("网络错误或服务器异常")}}).catch(()=>{a.info("已取消拒绝")})};return x(()=>{c()}),(t,e)=>{const r=n("el-table-column"),d=n("el-button"),b=n("el-table"),N=n("el-card");return T(),v("div",$,[e[2]||(e[2]=k("h2",null,"成绩审核管理",-1)),o(N,null,{default:s(()=>[o(b,{data:l.value,border:"",style:{width:"100%"}},{default:s(()=>[o(r,{prop:"studentName",label:"学生姓名",width:"120"}),o(r,{prop:"courseName",label:"课程名称",width:"150"}),o(r,{prop:"originalScore",label:"原成绩",width:"100"}),o(r,{prop:"modifiedScore",label:"修改后成绩",width:"120"}),o(r,{prop:"reason",label:"修改原因"}),o(r,{prop:"teacherName",label:"提交教师",width:"120"}),o(r,{label:"操作",width:"150"},{default:s(i=>[o(d,{link:"",type:"success",size:"small",onClick:w=>g(i.row)},{default:s(()=>[...e[0]||(e[0]=[u("批准",-1)])]),_:1},8,["onClick"]),o(d,{link:"",type:"danger",size:"small",onClick:w=>h(i.row)},{default:s(()=>[...e[1]||(e[1]=[u("拒绝",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},S=y(G,[["__scopeId","data-v-e29e4be2"]]);export{S as default};
