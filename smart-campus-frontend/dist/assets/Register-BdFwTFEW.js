import{_ as N,u as P,c as U,a as l,b as u,w as s,r as t,d as k,o as x,e as C,f as _,g as R,E,h as c}from"./index-CWfbs8s0.js";import{A as q}from"./AuthParticlesBg-CANvVlPC.js";const B={class:"register-container"},A={class:"register-box"},K={class:"register-actions"},S={__name:"Register",setup(I){const f=k(),w=P(),i=c(null),m=c(!1),o=R({role:"student",username:"",realName:"",password:"",confirmPassword:"",email:"",phone:""}),V={role:[{required:!0,message:"请选择角色",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少 6 位",trigger:"blur"}],confirmPassword:[{validator:(p,e,n)=>{if(!e)return n(new Error("请再次输入密码"));if(e!==o.password)return n(new Error("两次输入的密码不一致"));n()},trigger:"blur"}]},g=async()=>{i.value&&await i.value.validate(async p=>{if(p){m.value=!0;try{await w.register(o)&&(E.success("注册成功"),f.push("/"))}catch(e){console.error("注册失败:",e)}finally{m.value=!1}}})},b=()=>f.push("/login");return(p,e)=>{const n=t("el-option"),v=t("el-select"),a=t("el-form-item"),d=t("el-input"),y=t("el-button"),h=t("el-link"),z=t("el-form");return x(),U("div",B,[l(q),u("div",A,[e[10]||(e[10]=u("h2",{class:"register-title"},"用户注册",-1)),l(z,{model:o,rules:V,ref_key:"formRef",ref:i,class:"register-form","label-position":"top"},{default:s(()=>[l(a,{prop:"role",label:"角色"},{default:s(()=>[l(v,{modelValue:o.role,"onUpdate:modelValue":e[0]||(e[0]=r=>o.role=r),placeholder:"请选择角色",size:"large",style:{width:"100%"}},{default:s(()=>[l(n,{label:"学生",value:"student"}),l(n,{label:"教师",value:"teacher"})]),_:1},8,["modelValue"])]),_:1}),l(a,{prop:"username",label:"用户名（学号/工号）"},{default:s(()=>[l(d,{modelValue:o.username,"onUpdate:modelValue":e[1]||(e[1]=r=>o.username=r),placeholder:"请输入用户名",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{prop:"realName",label:"姓名"},{default:s(()=>[l(d,{modelValue:o.realName,"onUpdate:modelValue":e[2]||(e[2]=r=>o.realName=r),placeholder:"请输入姓名",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{prop:"password",label:"密码"},{default:s(()=>[l(d,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.password=r),type:"password","show-password":"",placeholder:"请输入密码",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{prop:"confirmPassword",label:"确认密码"},{default:s(()=>[l(d,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=r=>o.confirmPassword=r),type:"password","show-password":"",placeholder:"请再次输入密码",size:"large",onKeyup:C(g,["enter"])},null,8,["modelValue"])]),_:1}),l(a,{prop:"email",label:"邮箱（可选）"},{default:s(()=>[l(d,{modelValue:o.email,"onUpdate:modelValue":e[5]||(e[5]=r=>o.email=r),placeholder:"请输入邮箱",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{prop:"phone",label:"电话（可选）"},{default:s(()=>[l(d,{modelValue:o.phone,"onUpdate:modelValue":e[6]||(e[6]=r=>o.phone=r),placeholder:"请输入电话",size:"large"},null,8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(y,{type:"primary",size:"large",loading:m.value,onClick:g,style:{width:"100%"}},{default:s(()=>[...e[7]||(e[7]=[_(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1}),u("div",K,[e[9]||(e[9]=u("span",null,"已有账号？",-1)),l(h,{type:"primary",onClick:b},{default:s(()=>[...e[8]||(e[8]=[_("去登录",-1)])]),_:1})])]),_:1},8,["model"])])])}}},j=N(S,[["__scopeId","data-v-b34f1f9f"]]);export{j as default};
