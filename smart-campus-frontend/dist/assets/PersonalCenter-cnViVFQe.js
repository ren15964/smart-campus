import{_ as g,c as v,b as o,a as n,w as t,F as h,E as u,r,o as U,t as a,f as p}from"./index-jCaZfwQD.js";const c={name:"PersonalCenter",data(){return{userInfo:{username:"",name:"",id:"",email:"",phone:""},dialogFormVisible:!1,form:{name:"",email:"",phone:""},formLabelWidth:"120px"}},created(){this.getUserInfo()},methods:{getUserInfo(){h.get("/user/info").then(s=>{this.userInfo={username:s.data.username,name:s.data.realName,id:s.data.id,email:s.data.email,phone:s.data.phone}}).catch(s=>{u.error("获取用户信息失败"),console.error("获取用户信息失败:",s)})},editUserInfo(){this.form={...this.userInfo,name:this.userInfo.name},this.dialogFormVisible=!0},saveUserInfo(){h.put("/user/profile",{realName:this.form.name,email:this.form.email,phone:this.form.phone}).then(s=>{this.userInfo.name=this.form.name,this.userInfo.email=this.form.email,this.userInfo.phone=this.form.phone,this.dialogFormVisible=!1,u.success("用户信息更新成功！")}).catch(s=>{u.error("用户信息更新失败"),console.error("用户信息更新失败:",s)})}}},x={class:"personal-center-container"},C={class:"clearfix"},k={class:"user-info-item"},w={class:"user-info-item"},F={class:"user-info-item"},y={class:"user-info-item"},N={class:"user-info-item"},L={class:"dialog-footer"};function W(s,e,B,E,l,b){const m=r("el-button"),_=r("el-card"),f=r("el-input"),d=r("el-form-item"),V=r("el-form"),I=r("el-dialog");return U(),v("div",x,[e[14]||(e[14]=o("h1",null,"个人中心",-1)),n(_,{class:"box-card"},{header:t(()=>[o("div",C,[e[6]||(e[6]=o("span",null,"用户信息",-1)),n(m,{style:{float:"right",padding:"3px 0"},link:"",onClick:b.editUserInfo},{default:t(()=>[...e[5]||(e[5]=[p("编辑",-1)])]),_:1},8,["onClick"])])]),default:t(()=>[o("div",k,[e[7]||(e[7]=o("label",null,"用户名:",-1)),o("span",null,a(l.userInfo.username),1)]),o("div",w,[e[8]||(e[8]=o("label",null,"姓名:",-1)),o("span",null,a(l.userInfo.name),1)]),o("div",F,[e[9]||(e[9]=o("label",null,"学号/工号:",-1)),o("span",null,a(l.userInfo.id),1)]),o("div",y,[e[10]||(e[10]=o("label",null,"邮箱:",-1)),o("span",null,a(l.userInfo.email),1)]),o("div",N,[e[11]||(e[11]=o("label",null,"电话:",-1)),o("span",null,a(l.userInfo.phone),1)])]),_:1}),n(I,{modelValue:l.dialogFormVisible,"onUpdate:modelValue":e[4]||(e[4]=i=>l.dialogFormVisible=i),title:"编辑用户信息","append-to-body":""},{footer:t(()=>[o("div",L,[n(m,{onClick:e[3]||(e[3]=i=>l.dialogFormVisible=!1)},{default:t(()=>[...e[12]||(e[12]=[p("取 消",-1)])]),_:1}),n(m,{type:"primary",onClick:b.saveUserInfo},{default:t(()=>[...e[13]||(e[13]=[p("确 定",-1)])]),_:1},8,["onClick"])])]),default:t(()=>[n(V,{model:l.form},{default:t(()=>[n(d,{label:"姓名","label-width":l.formLabelWidth},{default:t(()=>[n(f,{modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=i=>l.form.name=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),n(d,{label:"邮箱","label-width":l.formLabelWidth},{default:t(()=>[n(f,{modelValue:l.form.email,"onUpdate:modelValue":e[1]||(e[1]=i=>l.form.email=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),n(d,{label:"电话","label-width":l.formLabelWidth},{default:t(()=>[n(f,{modelValue:l.form.phone,"onUpdate:modelValue":e[2]||(e[2]=i=>l.form.phone=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const q=g(c,[["render",W],["__scopeId","data-v-5137be54"]]);export{q as default};
