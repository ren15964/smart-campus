import{_ as x,s as D,c as u,a as o,w as s,i as B,E as p,r,h as R,d as E,o as c,b as n,t as i,f as l,J as f,Z as I,j as M,I as V}from"./index-jCaZfwQD.js";import{a as A,m as L}from"./notice-BRue8wlH.js";import{A as j}from"./AppEmpty-BAEE0X2a.js";const H={class:"notice-detail-container"},P={class:"card-header"},J={key:0,class:"detail-content"},O={class:"notice-title"},S={class:"notice-meta"},Z=["innerHTML"],$={key:0,class:"notice-attachment"},q={__name:"NoticeDetail",setup(z){const v=B(),_=E(),d=v.params.id,t=R({id:null,title:"",content:"",publisherName:"",priority:1,publishTime:"",readCount:0,attachment:"",isRead:!1}),y=async()=>{if(!d){p.error("缺少通知ID");return}try{const a=await A(d);a.code===200?(Object.assign(t.value,a.data),a.data.isRead||await L(d)):p.error(a.message||"获取通知详情失败")}catch(a){console.error("获取通知详情失败:",a),p.error("获取通知详情失败，请稍后再试")}},h=a=>{switch(a){case 1:return"普通";case 2:return"重要";case 3:return"紧急";default:return"未知"}},k=a=>{switch(a){case 1:return"info";case 2:return"warning";case 3:return"danger";default:return"info"}},b=()=>{_.back()};return D(()=>{y()}),(a,e)=>{const m=r("el-button"),g=r("el-tag"),N=r("el-divider"),w=r("el-icon"),C=r("el-link"),T=r("el-card");return c(),u("div",H,[o(T,{class:"box-card"},{header:s(()=>[n("div",P,[e[2]||(e[2]=n("span",null,"通知详情",-1)),o(m,{type:"primary",link:"",onClick:b},{default:s(()=>[...e[1]||(e[1]=[l("返回",-1)])]),_:1})])]),default:s(()=>[t.value.id?(c(),u("div",J,[n("h2",O,i(t.value.title),1),n("div",S,[n("span",null,"发布人: "+i(t.value.publisherName),1),n("span",null,[e[3]||(e[3]=l("优先级: ",-1)),o(g,{type:k(t.value.priority)},{default:s(()=>[l(i(h(t.value.priority)),1)]),_:1},8,["type"])]),n("span",null,"发布时间: "+i(t.value.publishTime),1),n("span",null,"阅读量: "+i(t.value.readCount),1)]),o(N),n("div",{class:"notice-body",innerHTML:t.value.content},null,8,Z),t.value.attachment?(c(),u("div",$,[o(C,{href:t.value.attachment,target:"_blank",type:"primary"},{default:s(()=>[o(w,null,{default:s(()=>[o(f(I))]),_:1}),e[4]||(e[4]=l(" 附件下载 ",-1))]),_:1},8,["href"])])):M("",!0)])):(c(),V(j,{key:1,description:"通知不存在或已删除"},{default:s(()=>[o(m,{type:"primary",onClick:e[0]||(e[0]=F=>f(_).push({name:"NoticeList"}))},{default:s(()=>[...e[5]||(e[5]=[l("返回列表",-1)])]),_:1})]),_:1}))]),_:1})])}}},U=x(q,[["__scopeId","data-v-f7bd4696"]]);export{U as default};
