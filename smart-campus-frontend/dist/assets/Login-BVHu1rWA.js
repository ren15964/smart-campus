import{_ as b,u as h,c as B,a as o,b as t,w as l,r,d as C,o as L,e as R,f,g as U,E as g,h as _}from"./index-jCaZfwQD.js";import{A as z}from"./AuthParticlesBg-DjXTuSye.js";const E={class:"login-container"},F={class:"login-box"},N={class:"login-actions"},q={__name:"Login",setup(A){const d=C(),y=h(),n=_(null),a=_(!1),s=U({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=async()=>{n.value&&await n.value.validate(async p=>{if(p){a.value=!0;try{await y.login(s)?(g.success("登录成功"),d.push("/")):g.error("用户名或密码错误")}catch(e){console.error("登录失败:",e)}finally{a.value=!1}}})},w=()=>d.push("/register");return(p,e)=>{const m=r("el-input"),i=r("el-form-item"),V=r("el-button"),k=r("el-form"),x=r("el-link");return L(),B("div",E,[o(z),t("div",F,[e[5]||(e[5]=t("h2",{class:"login-title"},"智慧校园管理平台",-1)),o(k,{model:s,rules:v,ref_key:"loginFormRef",ref:n,class:"login-form"},{default:l(()=>[o(i,{prop:"username"},{default:l(()=>[o(m,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:l(()=>[o(m,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large",onKeyup:R(c,["enter"])},null,8,["modelValue"])]),_:1}),o(i,null,{default:l(()=>[o(V,{type:"primary",size:"large",loading:a.value,onClick:c,style:{width:"100%"}},{default:l(()=>[...e[2]||(e[2]=[f(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",N,[e[4]||(e[4]=t("span",null,"没有账号？",-1)),o(x,{type:"primary",onClick:w},{default:l(()=>[...e[3]||(e[3]=[f("去注册",-1)])]),_:1})])])])}}},I=b(q,[["__scopeId","data-v-c0a8098c"]]);export{I as default};
