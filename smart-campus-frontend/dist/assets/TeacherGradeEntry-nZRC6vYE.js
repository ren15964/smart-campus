import{i as T}from"./grade-DAU3puue.js";import{_ as h,s as B,c as m,b as E,a,w as n,h as b,r,o as u,G as V,H as y,I as g,f as G,g as U,E as d}from"./index-jCaZfwQD.js";const L={class:"teacher-grade-entry"},N={__name:"TeacherGradeEntry",setup(F){const e=U({courseId:null,studentId:null,usualScore:0,finalScore:0}),i=b([]),c=b([]),x=()=>new Promise(o=>{setTimeout(()=>{o([{id:1,name:"数据结构"},{id:2,name:"算法设计"}])},500)}),I=o=>new Promise(l=>{setTimeout(()=>{l(o===1?[{id:101,name:"张三"},{id:102,name:"李四"}]:o===2?[{id:103,name:"王五"},{id:104,name:"赵六"}]:[])},500)}),v=async o=>{c.value=await I(o),e.studentId=null},w=async()=>{if(console.log("提交成绩:",e),!e.courseId||!e.studentId){d.error("请选择课程和学生");return}try{const o=await T(e);o.code===200?(d.success("成绩提交成功！"),e.usualScore=0,e.finalScore=0):d.error(o.msg||"成绩提交失败")}catch{d.error("网络错误或服务器异常")}};return B(async()=>{i.value=await x()}),(o,l)=>{const _=r("el-option"),p=r("el-select"),s=r("el-form-item"),f=r("el-input-number"),S=r("el-button"),C=r("el-form"),k=r("el-card");return u(),m("div",L,[l[5]||(l[5]=E("h2",null,"教师成绩录入",-1)),a(k,null,{default:n(()=>[a(C,{model:e,"label-width":"120px",style:{"max-width":"600px",margin:"20px auto"}},{default:n(()=>[a(s,{label:"选择课程"},{default:n(()=>[a(p,{modelValue:e.courseId,"onUpdate:modelValue":l[0]||(l[0]=t=>e.courseId=t),placeholder:"请选择课程",onChange:v},{default:n(()=>[(u(!0),m(V,null,y(i.value,t=>(u(),g(_,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"选择学生"},{default:n(()=>[a(p,{modelValue:e.studentId,"onUpdate:modelValue":l[1]||(l[1]=t=>e.studentId=t),placeholder:"请选择学生"},{default:n(()=>[(u(!0),m(V,null,y(c.value,t=>(u(),g(_,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"平时分"},{default:n(()=>[a(f,{modelValue:e.usualScore,"onUpdate:modelValue":l[2]||(l[2]=t=>e.usualScore=t),min:0,max:100},null,8,["modelValue"])]),_:1}),a(s,{label:"期末分"},{default:n(()=>[a(f,{modelValue:e.finalScore,"onUpdate:modelValue":l[3]||(l[3]=t=>e.finalScore=t),min:0,max:100},null,8,["modelValue"])]),_:1}),a(s,null,{default:n(()=>[a(S,{type:"primary",onClick:w},{default:n(()=>[...l[4]||(l[4]=[G("保存成绩",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},H=h(N,[["__scopeId","data-v-0bbc70e8"]]);export{H as default};
